<<<<<<< HEAD
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        #box, #box2, #box3, #box4{
            width: 200px;
            height: 200px;
            background-color: red;
            position: absolute;
            left: 0;
            top: 0;
        }
        #box2{
            background-color: blue;
            left: 200px;
            top: 0px;
        }
        #box3{
            background-color: black;
            left: 400px;
            top: 0px;
        }
        #box4{
            background-color: green;
            left: 600px;
            top: 0px;
        }
    </style>
</head>
<body>
<!--组件开发：
    和继承一样，本质上都是一种代码的复用形式，和继承的不同点，更像是一种兄弟的关系，
    关键点通过传入不同的参数来满足不同的需求，基于一套的代码；
    继承需要不断的创造子类，代码较多，且浪费资源；-->


<div id="box"></div>
<div id="box2"></div>
<div id="box3"></div>
<div id="box4"></div>
<script>
    function Drag() {
        this.oBox = null;
        this.difX = null;
        this.difY = null;
        this.settings = {  //把option里的内容复制到这里面，防止后面使用option.功能函数时，t1找不到报错
            beforeDown: function () {
            },
            beforeMove: function () {
            },
            beforeUp: function () {
            }
        }
    }
    Drag.prototype.init = function (option){   //在这里传入对象
        // console.log(option);
        extend(this.settings,option);
        this.oBox = document.getElementById(option.id)
        var that = this;
        this.oBox.onmousedown = function (ev) {
            that.settings.beforeDown(this);  //让赋值好的settings调用里面的beforeDown
            that.down(ev);
        }
    }
    Drag.prototype.down = function (ev){
        var ev = ev || event;
        var that = this;
        this.difX = ev.clientX - this.oBox.offsetLeft;
        this.difY = ev.clientY - this.oBox.offsetTop;
        document.onmousemove = function (ev2) {
            that.settings.beforeMove(that.oBox);
            that.move(ev2);
        };
        document.onmouseup = function () {
            that.settings.beforeUp();  //这里不需要传参数，只是一个alert功能
            that.up();
        }
    }
    Drag.prototype.move = function (ev2) {
        var ev = ev2 || event;
        var L = ev.clientX - this.difX;
        var T = ev.clientY - this.difY;
        if (L<0){
            L = 0;
        }
        if (T<0){
            T = 0;
        }
        if (L>document.documentElement.clientWidth - this.oBox.offsetWidth){
            L = document.documentElement.clientWidth - this.oBox.offsetWidth;
        }
        if (T>document.documentElement.clientHeight - this.oBox.offsetHeight){
            T = document.documentElement.clientHeight - this.oBox.offsetHeight;
        }
        this.oBox.style.left = L + "px";
        this.oBox.style.top = T + "px";
    }
    Drag.prototype.up = function () {
        document.onmousemove = null;
        document.onmouseup = null;
    }


    function extend(obj1,obj2) {
        for(var attr in obj2){
            obj1[attr] = obj2[attr];
        }
    }


    var t1 = new Drag();
    t1.init({
        id: "box",
    });
    var t2 = new Drag();
    t2.init({
        id: "box2",
        beforeDown: function (obj) {
            obj.innerHTML = "螺钉课堂";
            obj.style.color = "white";
        }
    });
    var t3 = new Drag();
    t3.init({
        id: "box3",
        beforeMove: function (obj) {
            obj.style.backgroundColor = "orange";
        }
    });
    var t4 = new Drag();
    t4.init({
        id: "box4",
        beforeUp: function () {
            alert('确定离开么')
        }
    });

</script>
</body>
=======
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        #box, #box2, #box3, #box4{
            width: 200px;
            height: 200px;
            background-color: red;
            position: absolute;
            left: 0;
            top: 0;
        }
        #box2{
            background-color: blue;
            left: 200px;
            top: 0px;
        }
        #box3{
            background-color: black;
            left: 400px;
            top: 0px;
        }
        #box4{
            background-color: green;
            left: 600px;
            top: 0px;
        }
    </style>
</head>
<body>
<!--组件开发：
    和继承一样，本质上都是一种代码的复用形式，和继承的不同点，更像是一种兄弟的关系，
    关键点通过传入不同的参数来满足不同的需求，基于一套的代码；
    继承需要不断的创造子类，代码较多，且浪费资源；-->


<div id="box"></div>
<div id="box2"></div>
<div id="box3"></div>
<div id="box4"></div>
<script>
    function Drag() {
        this.oBox = null;
        this.difX = null;
        this.difY = null;
        this.settings = {  //把option里的内容复制到这里面，防止后面使用option.功能函数时，t1找不到报错
            beforeDown: function () {
            },
            beforeMove: function () {
            },
            beforeUp: function () {
            }
        }
    }
    Drag.prototype.init = function (option){   //在这里传入对象
        // console.log(option);
        extend(this.settings,option);
        this.oBox = document.getElementById(option.id)
        var that = this;
        this.oBox.onmousedown = function (ev) {
            that.settings.beforeDown(this);  //让赋值好的settings调用里面的beforeDown
            that.down(ev);
        }
    }
    Drag.prototype.down = function (ev){
        var ev = ev || event;
        var that = this;
        this.difX = ev.clientX - this.oBox.offsetLeft;
        this.difY = ev.clientY - this.oBox.offsetTop;
        document.onmousemove = function (ev2) {
            that.settings.beforeMove(that.oBox);
            that.move(ev2);
        };
        document.onmouseup = function () {
            that.settings.beforeUp();  //这里不需要传参数，只是一个alert功能
            that.up();
        }
    }
    Drag.prototype.move = function (ev2) {
        var ev = ev2 || event;
        var L = ev.clientX - this.difX;
        var T = ev.clientY - this.difY;
        if (L<0){
            L = 0;
        }
        if (T<0){
            T = 0;
        }
        if (L>document.documentElement.clientWidth - this.oBox.offsetWidth){
            L = document.documentElement.clientWidth - this.oBox.offsetWidth;
        }
        if (T>document.documentElement.clientHeight - this.oBox.offsetHeight){
            T = document.documentElement.clientHeight - this.oBox.offsetHeight;
        }
        this.oBox.style.left = L + "px";
        this.oBox.style.top = T + "px";
    }
    Drag.prototype.up = function () {
        document.onmousemove = null;
        document.onmouseup = null;
    }


    function extend(obj1,obj2) {
        for(var attr in obj2){
            obj1[attr] = obj2[attr];
        }
    }


    var t1 = new Drag();
    t1.init({
        id: "box",
    });
    var t2 = new Drag();
    t2.init({
        id: "box2",
        beforeDown: function (obj) {
            obj.innerHTML = "螺钉课堂";
            obj.style.color = "white";
        }
    });
    var t3 = new Drag();
    t3.init({
        id: "box3",
        beforeMove: function (obj) {
            obj.style.backgroundColor = "orange";
        }
    });
    var t4 = new Drag();
    t4.init({
        id: "box4",
        beforeUp: function () {
            alert('确定离开么')
        }
    });

</script>
</body>
>>>>>>> 54dc926e033382b984d277118489c25166d63e2e
</html>